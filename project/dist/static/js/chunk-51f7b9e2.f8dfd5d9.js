(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51f7b9e2"],{"4c1a":function(e,t,r){"use strict";r("d524")},cad4:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"root"}},[t("canvas",{ref:"cvs",attrs:{id:"cvs"}}),t("el-dialog",{attrs:{title:"提示",visible:e.registerDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.registerDialogVisible=t}}},[t("span",{staticStyle:{"font-size":"18px"}},[e._v("请将注册表单填写完整！")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.registerDialogVisible=!1}}},[e._v("确 定")])],1)]),t("div",{staticClass:"register-container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"user1"}},[t("el-input",{attrs:{type:"text",placeholder:"用户名",required:"required",clearable:"","prefix-icon":"el-icon-user-solid"},model:{value:e.ruleForm.user1,callback:function(t){e.$set(e.ruleForm,"user1",t)},expression:"ruleForm.user1"}})],1),t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{staticClass:"phone-input",attrs:{placeholder:"邮箱","prefix-icon":"el-icon-reading",clearable:""},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),t("transition",{attrs:{name:"fade"}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.codeshow,expression:"codeshow"}],staticClass:"phone",attrs:{prop:"code"}},[t("el-input",{staticClass:"r-code",attrs:{placeholder:"验证码",minlength:6,maxlength:6,clearable:""},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),t("el-button",{staticClass:"code-btn",attrs:{type:"primary",disabled:!e.show},on:{click:function(t){return e.getCode()}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v(e._s(e.sendcode_text))]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])])],1)],1),t("el-form-item",{attrs:{prop:"pass"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":"",clearable:"","prefix-icon":"el-icon-lock"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),t("el-form-item",{attrs:{prop:"checkPass"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码","show-password":"",clearable:"","prefix-icon":"el-icon-lock"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",{staticClass:"btn-form"},[t("el-button",{staticClass:"r-submit",attrs:{type:"primary"},on:{click:function(t){return e.submitForm(e.ruleForm)}}},[e._v("注册")]),t("transition",{attrs:{name:"fade"}},[t("div",{class:[e.isRegisterSuccess?"register_tips_success":"register_tips_err"],domProps:{textContent:e._s(e.register_tips)}})]),t("span",{staticClass:"link",on:{click:function(t){return e.toLogin()}}},[e._v("已有账号？点击登录")])],1)],1)],1)],1)},a=[],o=(r("96cf"),r("1da1")),i={data:function(){var e=this,t=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,s){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:""===r?s(new Error("请输入用户名")):(a=/^[a-zA-Z0-9]{4,16}$/,a.test(r)?s():s(new Error("请输入正确的用户名格式（4-16位大小写字母或数字）")));case 1:case"end":return e.stop()}}),e)})));return function(t,r,s){return e.apply(this,arguments)}}(),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r,s,a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""===s?a(new Error("邮箱不能为空")):(o=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,o.test(s)?(e.codeshow=!0,a()):(e.codeshow=!1,a(new Error("请输入正确的邮箱 "))));case 1:case"end":return t.stop()}}),t)})));return function(e,r,s){return t.apply(this,arguments)}}(),s=function(e,t,r){if(""===t)r(new Error("请输入密码"));else{var s=/^[a-zA-Z0-9]{6,16}$/;s.test(t)?r():r(new Error("请输入正确的密码格式（6-16位大小写字母或数字）"))}},a=function(t,r,s){""===r?s(new Error("请输入验证码")):6===e.ruleForm.code.length?s():s(new Error("验证码格式错误"))},i=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.ruleForm.pass?s(new Error("两次输入密码不一致!")):s()};return{baseUrl:this.$store.state.baseUrl,registerDialogVisible:!1,activeIndex:"2",loginForm:{mobile:"",code:"",zheCode:""},show:!0,count:"",email_return:"",sendcode_text:"发送验证码",timer:null,codeshow:!1,ruleForm:{user1:"",email:"",pass:"",checkPass:"",code:""},rules:{code:[{required:!0,validator:a,trigger:"change"},{min:6,max:6,message:"长度为6",trigger:"change"}],user1:[{required:!0,validator:t,trigger:"change"}],email:[{required:!0,validator:r,trigger:"change"}],pass:[{required:!0,validator:s,trigger:"change"},{min:6,message:"长度在不少于6个字符",trigger:"change"}],checkPass:[{required:!0,validator:i,trigger:"change"},{min:6,message:"长度在不少于6个字符",trigger:"change"}]},tomain_countdown:0,register_tips:"",isRegisterSuccess:!1}},methods:{getCode:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.show=!1,this.count=60,setInterval((function(){r.count>0?r.count--:(r.sendcode_text="重新发送",r.show=!0)}),1e3),e.next=5,this.axios.get("".concat(this.baseUrl,"/register/mail/getcode?email=").concat(this.ruleForm.email));case 5:t=e.sent,"success"==t.data.status?this.$message({type:"success",message:"验证码已发送至您的邮箱"}):this.$message.error(t.data.msg),"fail"==t.data.status&&(this.codeshow=!1,this.sendcode_text="发送验证码",this.show=!0),this.email_return=t;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!/^[a-zA-Z0-9]{4,16}$/.test(t.user1)){e.next=24;break}if(!/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.test(t.email)){e.next=21;break}if(console.log(this.email_return),this.email_return.data.code!=t.code){e.next=18;break}if(!/^[a-zA-Z0-9]{6,16}$/.test(t.pass)){e.next=15;break}if(t.pass!=t.checkPass){e.next=12;break}return e.next=8,this.axios.get("".concat(this.baseUrl,"/register"),{params:{username:t.user1,email:t.email,password:t.pass,signuptime:new Date,avatar:""}});case 8:r=e.sent,"fail"==r.data.status?(this.isRegisterSuccess=!1,this.register_tips=r.data.msg):(this.tomain_countdown=3,this.isRegisterSuccess=!0,this.register_tips="注册成功，将在".concat(this.tomain_countdown,"秒后跳转到登录页"),setInterval((function(){s.tomain_countdown=s.tomain_countdown-1,s.register_tips="注册成功，将在".concat(s.tomain_countdown,"秒后跳转到登录页"),0===s.tomain_countdown&&s.$router.push("/login")}),1e3)),e.next=13;break;case 12:this.formLoseItem();case 13:e.next=16;break;case 15:this.formLoseItem();case 16:e.next=19;break;case 18:this.formLoseItem();case 19:e.next=22;break;case 21:this.formLoseItem();case 22:e.next=25;break;case 24:this.formLoseItem();case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toLogin:function(){this.$router.push("/login")},formLoseItem:function(){this.registerDialogVisible=!0},handleClose:function(e){e()}},mounted:function(){this.$store.commit("starAnimeBackground",this.$refs.cvs)}},n=i,c=(r("4c1a"),r("2877")),l=Object(c["a"])(n,s,a,!1,null,"4248edf1",null);t["default"]=l.exports},d524:function(e,t,r){}}]);
//# sourceMappingURL=chunk-51f7b9e2.f8dfd5d9.js.map