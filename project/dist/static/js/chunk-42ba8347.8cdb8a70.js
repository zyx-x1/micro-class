(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42ba8347"],{"259e":function(e,s,t){},8641:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"forget"}},[s("canvas",{ref:"cvs",attrs:{id:"cvs"}}),s("div",{attrs:{id:"forget-container"}},[e.isCodeTrue?s("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.passRuleForm,rules:e.passRules}},[s("el-form-item",{attrs:{prop:"pass"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":"",clearable:"","prefix-icon":"el-icon-lock"},model:{value:e.passRuleForm.pass,callback:function(s){e.$set(e.passRuleForm,"pass",s)},expression:"passRuleForm.pass"}})],1),s("el-form-item",{attrs:{prop:"checkPass"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码","show-password":"",clearable:"","prefix-icon":"el-icon-lock"},model:{value:e.passRuleForm.checkPass,callback:function(s){e.$set(e.passRuleForm,"checkPass",s)},expression:"passRuleForm.checkPass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitReset(e.passRuleForm)}}},[e._v("确定")]),s("section",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.loginCredentials.status,expression:"!$store.state.loginCredentials.status"}],staticClass:"forget-else"},[s("span",{staticClass:"forget-forget link",on:{click:function(s){return e.toLogin()}}},[e._v("登录")]),s("span",{staticClass:"link",on:{click:function(s){return e.toRegister()}}},[e._v("注册")])])],1)],1):s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{staticClass:"phone-input",attrs:{placeholder:"邮箱","prefix-icon":"el-icon-reading",clearable:""},model:{value:e.ruleForm.email,callback:function(s){e.$set(e.ruleForm,"email",s)},expression:"ruleForm.email"}})],1),s("transition",{attrs:{name:"fade"}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.codeshow,expression:"codeshow"}],staticClass:"phone",attrs:{prop:"code"}},[s("el-input",{staticClass:"r-code",attrs:{placeholder:"验证码",minlength:6,maxlength:6,clearable:""},model:{value:e.ruleForm.code,callback:function(s){e.$set(e.ruleForm,"code",s)},expression:"ruleForm.code"}}),s("el-button",{staticClass:"code-btn",attrs:{type:"primary",disabled:!e.show},on:{click:function(s){return e.getCode()}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v(e._s(e.sendcode_text))]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])])],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitCode(e.ruleForm)}}},[e._v("确定")]),s("section",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.loginCredentials.status,expression:"!$store.state.loginCredentials.status"}],staticClass:"forget-else"},[s("span",{staticClass:"forget-forget link",on:{click:function(s){return e.toLogin()}}},[e._v("登录")]),s("span",{staticClass:"link",on:{click:function(s){return e.toRegister()}}},[e._v("注册")])])],1)],1)],1)])},a=[],o=(t("96cf"),t("1da1")),n={data:function(){var e=this,s=function(){var s=Object(o["a"])(regeneratorRuntime.mark((function s(t,r,a){var o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:""===r?a(new Error("邮箱不能为空")):(o=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,o.test(r)?(e.codeshow=!0,a()):(e.codeshow=!1,a(new Error("请输入正确的邮箱"))));case 1:case"end":return s.stop()}}),s)})));return function(e,t,r){return s.apply(this,arguments)}}(),t=function(e,s,t){if(""===s)t(new Error("请输入密码"));else{var r=/^[a-zA-Z0-9]{6,16}$/;r.test(s)?t():t(new Error("请输入正确的密码格式（6-16位大小写字母或数字）"))}},r=function(s,t,r){""===t?r(new Error("请输入验证码")):4===e.ruleForm.code.length?r():r(new Error("验证码格式错误"))},a=function(s,t,r){""===t?r(new Error("请再次输入密码")):t!==e.passRuleForm.pass?r(new Error("两次输入密码不一致!")):r()};return{baseUrl:this.$store.state.baseUrl,ruleForm:{email:""},passRuleForm:{pass:"",checkPass:""},email_return:"",sendcode_text:"发送验证码",timer:null,count:0,show:!0,codeshow:!1,isCodeTrue:!1,rules:{email:[{required:!0,validator:s,trigger:"change"}],code:[{required:!0,validator:r,trigger:"change"},{min:6,max:6,message:"长度为6",trigger:"change"}]},passRules:{pass:[{required:!0,validator:t,trigger:"change"},{min:6,message:"长度在不少于6个字符",trigger:"change"}],checkPass:[{required:!0,validator:a,trigger:"change"},{min:6,message:"长度在不少于6个字符",trigger:"change"}]}}},methods:{getCode:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var s,t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.show=!1,this.count=60,setInterval((function(){t.count>0?t.count--:(t.sendcode_text="重新发送",t.show=!0)}),1e3),e.next=5,this.axios.get("".concat(this.baseUrl,"/reset/email?email=").concat(this.ruleForm.email));case 5:s=e.sent,"success"==s.data.status?this.$message({type:"success",message:"验证码已发送至您的邮箱"}):this.$message.error(s.data.msg),"fail"==s.data.status&&(this.codeshow=!1,this.sendcode_text="发送验证码",this.show=!0),this.email_return=s.data.code;case 9:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),submitCode:function(e){/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.test(e.email)?e.code==this.email_return?this.isCodeTrue=!0:this.$message.error("验证码错误！"):this.$message.error("邮箱格式错误！")},submitReset:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(s){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.pass){e.next=3;break}return this.$message.error("请输入新密码！"),e.abrupt("return");case 3:if(s.checkPass){e.next=6;break}return this.$message.error("请输入确认密码！"),e.abrupt("return");case 6:if(s.pass===s.checkPass){e.next=9;break}return this.$message.error("新密码与确认密码不一致！"),e.abrupt("return");case 9:return e.next=11,this.axios.get("".concat(this.baseUrl,"/forget/submit"),{params:{email:this.ruleForm.email,password:s.pass}});case 11:if(t=e.sent,"fail"!=t.data.status){e.next=15;break}return this.$message.error(t.data.msg),e.abrupt("return");case 15:this.$message({type:"success",message:"密码重置成功，即将跳转到登录页面..."}),r=this,setTimeout((function(){r.$router.push("/login")}),1e3);case 18:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}(),toRegister:function(){this.$router.push("/signup"),setTimeout((function(){location.reload()}),10)},toLogin:function(){this.$router.push("/login")}},mounted:function(){this.$store.commit("starAnimeBackground",this.$refs.cvs)}},i=n,c=(t("cd1f"),t("2877")),u=Object(c["a"])(i,r,a,!1,null,null,null);s["default"]=u.exports},cd1f:function(e,s,t){"use strict";t("259e")}}]);
//# sourceMappingURL=chunk-42ba8347.8cdb8a70.js.map