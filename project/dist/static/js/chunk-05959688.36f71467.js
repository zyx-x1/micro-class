(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05959688"],{"2a8a":function(e,t,a){},7101:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login"}},[t("canvas",{ref:"cvs",attrs:{id:"cvs"}}),t("div",{attrs:{id:"login-container"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{staticClass:"phone-input",attrs:{placeholder:"邮箱","prefix-icon":"el-icon-reading",clearable:""},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{prop:"pass"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":"",clearable:"","prefix-icon":"el-icon-lock"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitLogin(e.ruleForm)}}},[e._v("登录")]),t("section",{staticClass:"login-else"},[t("span",{staticClass:"login-forget link",on:{click:function(t){return e.forgetPass()}}},[e._v("忘记密码")]),t("span",{staticClass:"link",on:{click:function(t){return e.toRegister()}}},[e._v("没有账号？点击注册")])])],1)],1)],1)])},s=[],n=(a("96cf"),a("1da1")),i={data:function(){var e=this,t=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a,r,s){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""===r?s(new Error("邮箱不能为空")):(n=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,n.test(r)?(e.codeshow=!0,s()):(e.codeshow=!1,s(new Error("请输入正确的邮箱"))));case 1:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}(),a=function(e,t,a){if(""===t)a(new Error("请输入密码"));else{var r=/^[a-zA-Z0-9]{6,16}$/;r.test(t)?a():a(new Error("请输入正确的密码格式"))}};return{baseUrl:this.$store.state.baseUrl,ruleForm:{email:"",pass:""},rules:{email:[{required:!0,validator:t,trigger:"change"}],pass:[{required:!0,validator:a,trigger:"change"},{min:6,message:"长度在不少于6个字符",trigger:"change"}]}}},methods:{submitLogin:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.test(t.email)){e.next=6;break}if(!/^[a-zA-Z0-9]{6,16}$/.test(t.pass)){e.next=6;break}return e.next=4,this.axios.get("".concat(this.baseUrl,"/login"),{params:{email:t.email,password:t.pass,logintime:new Date}});case 4:a=e.sent,"fail"===a.data.status?this.$message.error(a.data.msg):(localStorage.setItem("token",a.data.token),localStorage.setItem("username",a.data.resData.username),localStorage.setItem("loginCredentials",1),this.$store.commit("setLoginCredentials",{status:!0,id:a.data.resData.id,username:a.data.resData.username,avatar:a.data.resData.avatar,email:a.data.resData.email,usernameUpdateTime:a.data.resData.username_updatetime,loginTime:new Date,credits:a.data.resData.credits}),this.$message({message:"登录成功！",type:"success"}),setTimeout((function(){r.$router.push("/")}),1500));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toRegister:function(){this.$router.push("/signup"),setTimeout((function(){location.reload()}),10)},forgetPass:function(){this.$router.push("/forget"),window.scrollTo(0,0)}},mounted:function(){this.$store.commit("starAnimeBackground",this.$refs.cvs),this.$store.state.loginCredentials.status&&this.$router.push("/")}},o=i,l=(a("a58b"),a("2877")),u=Object(l["a"])(o,r,s,!1,null,null,null);t["default"]=u.exports},a58b:function(e,t,a){"use strict";a("2a8a")}}]);
//# sourceMappingURL=chunk-05959688.36f71467.js.map